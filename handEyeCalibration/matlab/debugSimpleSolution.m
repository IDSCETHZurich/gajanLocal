clear; clc;
%Adding data #1
rotRB1 = [  -0.0104964   -0.999586  -0.0268005
  -0.367576   0.0287825   -0.929548
   0.929934 9.43542e-05   -0.367726 ]; 
transRB1 = [ -0.0215891
-0.748693
0.385917 ]; 
rotCB1 = [  0.965113 0.0152818  0.261386
0.0665167  0.951234 -0.301212
-0.253243   0.30809  0.917032 ]; 
rotCBin1 = [  0.965113 0.0665167 -0.253243
0.0152818  0.951234   0.30809
 0.261386 -0.301212  0.917032 ]; 
transCB1 = [ -0.468685
-0.559969
1.51721 ]; 

%Checkerboard found. Measurements Updated.
%Adding data #2
rotRB2 = [  -0.0503689   -0.971683   -0.230858
  -0.207544    0.236289   -0.949259
   0.976928 9.98974e-05   -0.213568 ]; 
transRB2 = [ -0.171818
-0.706484
0.505255 ]; 
rotCB2 = [  0.985045 0.0312433  0.169438
0.0385177  0.918599 -0.393311
-0.167934  0.393955  0.903658 ]; 
rotCBin2 = [  0.985046 0.0385177 -0.167934
0.0312433  0.918599  0.393955
 0.169438 -0.393311  0.903658 ]; 
transCB2 = [ -0.961277
-0.166913
1.65552 ]; 

%Checkerboard found. Measurements Updated.
%Adding data #3
rotRB3 = [   0.0443584   -0.978296    0.202407
  -0.208958   -0.207211    -0.95572
   0.976918 9.95696e-05   -0.213615 ]; 
transRB3 = [ 0.150641
-0.711305
0.505224 ]; 
rotCB3 = [   0.994547  -0.035928 -0.0979019
-0.00231832   0.930932  -0.365184
   0.10426    0.36342   0.925773 ]; 
rotCBin3 = [    0.994547 -0.00231832     0.10426
  -0.035928    0.930932     0.36342
 -0.0979019   -0.365184    0.925773 ]; 
transCB3 = [ 0.11765
-0.157052
1.59834 ]; 

Ar1 = rotRB2' * rotRB1; 
Ar2 = rotRB3' * rotRB2;
Br1 = rotCBin2' * rotCBin1; 
Br2 = rotCBin3' * rotCBin2;

alpha1 = getLogTheta(Ar1);
alpha2 = getLogTheta(Ar2);
beta1 = getLogTheta(Br1);
beta2 = getLogTheta(Br2);

Astylish = [alpha1 alpha2 cross(alpha1, alpha2)];
Bstylish = [beta1 beta2 cross(beta1, beta2)];

X_est = Astylish / Bstylish ;


% Performing Estimation...
% Ar1
%  0.985296 0.0444666  -0.16497
% -0.076562  0.978081 -0.193637
%  0.152744   0.20342  0.967104
% Ar2
%   0.995512 -0.0923791 -0.0205236
%  0.0923782   0.901632   0.422523
% -0.0205275  -0.422523    0.90612
% Br1
%   0.995447   0.044205 -0.0844499
% -0.0515943   0.994834 -0.0874216
%  0.0801492  0.0913807   0.992585
% Br2
%   0.961964  0.0438101  -0.269642
% -0.0350743   0.998695  0.0371331
%   0.270917 -0.0262632   0.962244
% alpha1
% 0.200861
% -0.160723
% -0.0612254
% alpha2
% -0.436946
% 2.0418e-06
% 0.0955322
% beta1
% 0.0896573
% -0.0825354
% -0.0480369
% beta2
% -0.0321119
% -0.273807
% -0.0399569
% Astylish
%   0.200861  -0.436946 -0.0153541
%  -0.160723 2.0418e-06 0.00756348
% -0.0612254  0.0955322 -0.0702271
% Bstylish
%   0.0896573  -0.0321119 -0.00985496
%  -0.0825354   -0.273807  0.00512499
%  -0.0480369  -0.0399569  -0.0271991
% Xr_est
%   3.21693    1.2713 -0.361527
%  -1.51117  0.134209  0.294748
% -0.0166764 -0.705226   2.45512
% 
